{{ define "main" }}

<section id="criaturaTree" class="max-w-6xl mx-auto px-4 py-10 text-fox-red">
  <h1 class="text-4xl font-title text-center mb-12">√ÅRBOL DE CRIATURAS</h1>

  <div id="nivel1" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12 text-center"></div>

  <div id="nivelesContainer"></div>
</section>

<div class="flex justify-center mb-12">
  <a href="/">
    <img src="/images/dar3D-logo.jpg"
         class="w-64 rounded-xl border border-fox-red" />
  </a>
</div>

<!-- 1) Definir CRIATURAS ANTES del JS principal -->
<script>
  window.CRIATURAS = {{ .Site.Data.criaturas | jsonify | safeJS }};
</script>
<script>
const IPFS_BASE = "https://w3s.link/ipfs/bafybeib6a7dzgprashrdflr7p6ukx34tw3nvocqxc7mjw5paxwnhcsiqqq/";

for (const cat in window.CRIATURAS) {
    for (const sub in window.CRIATURAS[cat]) {
        for (const name in window.CRIATURAS[cat][sub]) {

            const item = window.CRIATURAS[cat][sub][name];

            if (item.glb_name) {
                item.glb = IPFS_BASE + item.glb_name;   // üî• AFEGIM GLB FINAL
            }
        }
    }
}
</script>
<!-- 2) Cargar model-viewer -->
<script type="module"
        src="https://cdn.jsdelivr.net/npm/@google/model-viewer@3.3.0/dist/model-viewer.min.js">
</script>

<!-- 3) Cargar la l√≥gica del √°rbol -->
<script src="/js/arbol-criaturas.js" defer></script>

{{ end }}
